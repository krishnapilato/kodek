<div class="login-container">
    <mat-card class="login-card">
        <mat-card-title>Welcome back.</mat-card-title>
        <mat-card-subtitle>Sign in to continue.</mat-card-subtitle>
        <div class="space"></div>
        <mat-card-content>
            <form (ngSubmit)="login(loginForm)" #loginForm="ngForm">
                <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Email</mat-label>
                    <input matInput [(ngModel)]="loginRequest.email" name="loginRequest.email" required email/>
                    <mat-error *ngIf=" loginForm.controls['loginRequest.email']?.invalid && loginForm.controls['loginRequest.email']?.touched">
                        <ng-container *ngIf="loginForm.controls['loginRequest.email']?.hasError('required')">Email is required</ng-container>
                        <ng-container *ngIf="loginForm.controls['loginRequest.email']?.hasError('email')">Please enter a valid email</ng-container>
                    </mat-error>
                    <mat-icon matSuffix fontIcon="mail"></mat-icon>
                </mat-form-field>
                <div class="space"></div>
                <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Password</mat-label>
                    <mat-icon *ngIf="loginForm.controls['loginRequest.password']?.value?.length === 0" matSuffix fontIcon="key"></mat-icon>
                    <input matInput [minLength]="8" [type]="hide ? 'password' : 'text'" [(ngModel)]="loginRequest.password" name="loginRequest.password" required/>
                    <mat-icon *ngIf="loginForm.controls['loginRequest.password']?.value?.length > 0" matSuffix (click)="hide = !hide">{{hide ? "visibility_off" : "visibility"}}</mat-icon>
                    <mat-error *ngIf="loginForm.controls['loginRequest.password']?.value?.length > 8">Your password is too short. It should have 9 characters or more.</mat-error>
                    <mat-error *ngIf="loginForm.controls['loginRequest.password']?.invalid && loginForm.controls['loginRequest.password']?.touched">
                        Password is required
                    </mat-error>
                </mat-form-field>
                <div class="space"></div>
                <div *ngIf="error" class="error">{{ error }}</div>
                <div class="space"></div>
                <button mat-raised-button color="primary" type="submit" [disabled]="loginForm.invalid" class="full-width">
                    Login <mat-icon iconPositionEnd fontIcon="login"></mat-icon>
                </button>
            </form>
            <div class="space"></div>
            <p class="signup-link">
                Don't have an account? <a routerLink="/auth/signup" matTooltip="Sign Up" [matTooltipPosition]="'after'">Sign up</a>
            </p>
        </mat-card-content>
    </mat-card>
</div>